# ğŸ¥ HealthSync

> **AI ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• ê±´ê°•ê´€ë¦¬ í”Œë«í¼**  
> ëª©í‘œ ì„¤ì •ë¶€í„° ì‹ë‹¨ ê³„íš, ì§„í–‰ë„ ì¶”ì , AI ìƒë‹´ê¹Œì§€ ì˜¬ì¸ì› í—¬ìŠ¤ì¼€ì–´ ì„œë¹„ìŠ¤

**ë°°í¬ URL**: https://healthsync-dev.duckdns.org

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [í•µì‹¬ êµ¬í˜„ ì‚¬í•­](#-í•µì‹¬-êµ¬í˜„-ì‚¬í•­)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#-ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
- [í–¥í›„ ê³„íš](#-í–¥í›„-ê³„íš)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

**HealthSync**ëŠ” ì‚¬ìš©ìì˜ ê±´ê°• ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ í†µí•© ê±´ê°•ê´€ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜

- **ê°œì¸í™”**: ì‚¬ìš©ìë³„ ì‹ ì²´ ì •ë³´ì™€ ëª©í‘œì— ë§ì¶˜ ë§ì¶¤í˜• ê³„íš ìˆ˜ë¦½
- **ê³¼í•™ì **: TDEE ê¸°ë°˜ ì¹¼ë¡œë¦¬ ê³„ì‚° ë° ë§¤í¬ë¡œ ì˜ì–‘ì†Œ ë¹„ìœ¨ ì„¤ì •
- **í¸ë¦¬í•¨**: ê³µê³µë°ì´í„° í¬í„¸ ì—°ë™ìœ¼ë¡œ 10ë§Œ+ ì‹í’ˆ ì˜ì–‘ ì •ë³´ ì¦‰ì‹œ ì¡°íšŒ
- **ì»¤ë®¤ë‹ˆí‹°**: ê°™ì€ ëª©í‘œë¥¼ ê°€ì§„ ì‚¬ìš©ìë“¤ê³¼ì˜ ì •ë³´ ê³µìœ 
- **AI ì§€ì›**: OpenAI GPT-4o-mini ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• ê±´ê°• ìƒë‹´

### ê°œë°œ ê¸°ê°„
2024.11 - 2024.12 (ì•½ 2ê°œì›”)

### ê°œë°œ ì¸ì›
1ì¸ (í’€ìŠ¤íƒ ê°œë°œ)

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ ì†Œì…œ ë¡œê·¸ì¸ & ì¸ì¦
- OAuth2 ê¸°ë°˜ ì†Œì…œ ë¡œê·¸ì¸ (Google, Kakao, Naver)
- JWT í† í° ê¸°ë°˜ ì¸ì¦ (Access + Refresh)
- HttpOnly Cookieë¡œ ì•ˆì „í•œ í† í° ê´€ë¦¬
- ìë™ í† í° ê°±ì‹  (Refresh Token)

### 2ï¸âƒ£ ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬
- ì‹ ì²´ ì •ë³´ ì…ë ¥ (í‚¤, ëª¸ë¬´ê²Œ, ë‚˜ì´, ì„±ë³„, í™œë™ëŸ‰)
- BMI ìë™ ê³„ì‚° ë° ì‹œê°í™”
- í™œë™ ë ˆë²¨ë³„ TDEE (í•˜ë£¨ ì†Œëª¨ ì¹¼ë¡œë¦¬) ê³„ì‚°
- í”„ë¡œí•„ ê¸°ë¡ íˆìŠ¤í† ë¦¬

### 3ï¸âƒ£ ëª©í‘œ ì„¤ì • & ì‹ë‹¨ ê³„íš
- **ëª©í‘œ íƒ€ì… ì„ íƒ**: ê°ëŸ‰(LEAN) / ì¦ëŸ‰(HEALTH)
- **ê¸°ê°„ ì„¤ì •**: 1ì£¼~24ì£¼ ë§ì¶¤ ê³„íš
- **ìë™ ê³„ì‚°**:
  - TDEE ê¸°ë°˜ ì¼ì¼ ê¶Œì¥ ì„­ì·¨ ì¹¼ë¡œë¦¬
  - ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ì¹¼ë¡œë¦¬ ì¦ê°ëŸ‰
  - íƒ€ì…ë³„ ë§¤í¬ë¡œ ì˜ì–‘ì†Œ ë¹„ìœ¨ (íƒ„ë‹¨ì§€)
  - ë¼ë‹ˆë‹¹ ê¶Œì¥ ì¹¼ë¡œë¦¬ ë° ì˜ì–‘ì†Œ
- **ì•ˆì „ ì¥ì¹˜**:
  - ê³¼ë„í•œ ê°ëŸ‰/ì¦ëŸ‰ ì œí•œ (Â±20%)
  - ì„±ë³„ë³„ ìµœì†Œ ì¹¼ë¡œë¦¬ í•˜í•œì„  (ë‚¨ì„± 1500kcal, ì—¬ì„± 1200kcal)

### 4ï¸âƒ£ ì‹í’ˆ ê²€ìƒ‰ & ì˜ì–‘ ì •ë³´
- ê³µê³µë°ì´í„° í¬í„¸ API 4ì¢… í†µí•© (ì‹í’ˆ/ì›ì¬ë£Œ/ê°€ê³µì‹í’ˆ/ìŠ¹ì¸ì‹í’ˆ)
- 10ë§Œ+ ì‹í’ˆ ì˜ì–‘ ì •ë³´ ì‹¤ì‹œê°„ ê²€ìƒ‰
- ìˆœì°¨ ê²€ìƒ‰ìœ¼ë¡œ ìµœì ì˜ ê²°ê³¼ ì œê³µ
- ì‹ë‹¨ êµ¬ì„± ë„ìš°ë¯¸ (ë¼ë‹ˆë³„ ì‹í’ˆ ì¶”ê°€)

### 5ï¸âƒ£ ì§„í–‰ë„ ì¶”ì  & ë¦¬í¬íŠ¸
- ì£¼ê°„ ì§„í–‰ë„ ì‹œê°í™” (Recharts)
- ëª©í‘œ ëŒ€ë¹„ í˜„ì¬ ìƒíƒœ í™•ì¸
- ì¹¼ë¡œë¦¬/ë§¤í¬ë¡œ ì˜ì–‘ì†Œ ë‹¬ì„±ë¥ 
- ì²´ì¤‘ ë³€í™” ê·¸ë˜í”„

### 6ï¸âƒ£ AI ê±´ê°• ìƒë‹´
- OpenAI GPT-4o-mini ì—°ë™
- ì‚¬ìš©ì í”„ë¡œí•„ & ëª©í‘œ ê¸°ë°˜ ë§ì¶¤ ë‹µë³€
- ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥ ë° ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- ë¦¬í¬íŠ¸ ê¸°ë°˜ ìƒì„¸ ë¶„ì„ ì œê³µ

### 7ï¸âƒ£ ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ
- ê²Œì‹œê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ (CRUD)
- ì¢‹ì•„ìš”/ì¡°íšŒìˆ˜/ëŒ“ê¸€ ê¸°ëŠ¥
- íƒœê·¸ ì‹œìŠ¤í…œ (N:M ê´€ê³„)
- ë¶ë§ˆí¬ ê¸°ëŠ¥
- ê³µê°œ/ë¹„ê³µê°œ ì„¤ì •
- Markdown ì§€ì›

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **React** | 19.1.1 | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| **React Router** | 7.8.2 | SPA ë¼ìš°íŒ… |
| **Vite** | 7.1.2 | ë¹Œë“œ ë„êµ¬ & ê°œë°œ ì„œë²„ |
| **Axios** | 1.11.0 | HTTP í´ë¼ì´ì–¸íŠ¸ |
| **Recharts** | 3.2.1 | ë°ì´í„° ì‹œê°í™” |
| **React Markdown** | 10.1.0 | Markdown ë Œë”ë§ |
| **Lucide React** | 0.544.0 | ì•„ì´ì½˜ |
| **Day.js** | 1.11.18 | ë‚ ì§œ ì²˜ë¦¬ |

### Backend
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **Spring Boot** | 3.0.1 | ë°±ì—”ë“œ í”„ë ˆì„ì›Œí¬ |
| **Java** | 17 | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ |
| **Spring Security** | - | ì¸ì¦/ì¸ê°€ |
| **Spring Data JPA** | - | ORM |
| **QueryDSL** | 5.0.0 | ë™ì  ì¿¼ë¦¬ |
| **MySQL** | 8.0.30 | ì£¼ ë°ì´í„°ë² ì´ìŠ¤ |
| **Redis** | - | ì„¸ì…˜/ìºì‹œ |
| **JWT (jjwt)** | 0.12.5 | í† í° ì¸ì¦ |
| **WebFlux** | - | ì™¸ë¶€ API í˜¸ì¶œ |

### Infrastructure & DevOps
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Docker** | ì»¨í…Œì´ë„ˆí™” |
| **Docker Compose** | ë©€í‹° ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ |
| **Nginx** | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ & ì •ì  íŒŒì¼ ì„œë¹™ |
| **AWS EC2** | ì„œë²„ í˜¸ìŠ¤íŒ… |
| **DuckDNS** | ë™ì  DNS |
| **Let's Encrypt** | SSL/TLS ì¸ì¦ì„œ |
| **GitHub** | ë²„ì „ ê´€ë¦¬ |

### External APIs
- **OAuth2 Providers**: Google, Kakao, Naver
- **OpenAI API**: GPT-4o-mini
- **ê³µê³µë°ì´í„° í¬í„¸**: ì‹í’ˆì˜ì–‘ì •ë³´ API (4ì¢…)

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Client (Browser)                    â”‚
â”‚                  React SPA (Vite Build)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPS
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AWS EC2 (Ubuntu)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Nginx (Reverse Proxy)                â”‚  â”‚
â”‚  â”‚  - /api/*      â†’ Backend:8080                     â”‚  â”‚
â”‚  â”‚  - /posts/*    â†’ Backend:8080                     â”‚  â”‚
â”‚  â”‚  - /oauth2/*   â†’ Backend:8080                     â”‚  â”‚
â”‚  â”‚  - /*          â†’ Frontend (SPA fallback)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â”‚                 â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Frontend Container      â”‚  â”‚  Backend Container â”‚  â”‚
â”‚  â”‚   (Nginx + Static Files)  â”‚  â”‚  (Spring Boot:8080)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                          â”‚   MySQL:3306            â”‚    â”‚
â”‚                          â”‚   (healthsync DB)       â”‚    â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        External Services               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ OpenAI API (GPT-4o-mini)           â”‚
â”‚  â€¢ ê³µê³µë°ì´í„° í¬í„¸ (ì‹í’ˆì˜ì–‘ì •ë³´)       â”‚
â”‚  â€¢ OAuth2 Providers (G/K/N)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°°í¬ ì›Œí¬í”Œë¡œìš°
```bash
# ë¡œì»¬ ê°œë°œ
git add . && git commit -m "feat: new feature"
git push origin main

# ì„œë²„ ë°°í¬
cd ~/HealthSync-Public
git pull origin main

# Frontend ë¹Œë“œ
cd frontend && npm run build && cd ..

# Docker ì¬ë¹Œë“œ & ì¬ì‹œì‘
docker-compose down
docker-compose up -d --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f backend
```

---

## ğŸ’¡ í•µì‹¬ êµ¬í˜„ ì‚¬í•­

### 1. ì¸ì¦/ì¸ê°€ ì‹œìŠ¤í…œ

#### OAuth2 + JWT í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹
```
User â†’ OAuth2 Login â†’ Backend â†’ JWT ë°œê¸‰ â†’ HttpOnly Cookie
                         â†“
                    DBì— User ì €ì¥
                    (email ê¸°ì¤€ upsert)
```

**ì¥ì **:
- ì†Œì…œ ë¡œê·¸ì¸ìœ¼ë¡œ ì‚¬ìš©ì í¸ì˜ì„± â†‘
- JWTë¡œ Stateless ì¸ì¦
- HttpOnly Cookieë¡œ XSS ë°©ì–´
- Refresh Tokenìœ¼ë¡œ ìë™ ê°±ì‹ 

#### í† í° ê°±ì‹  í”Œë¡œìš°
```javascript
// Frontend Interceptor (axios)
api.interceptors.response.use(
  (res) => res,
  async (error) => {
    if (error.response?.status === 401 && !config._retry) {
      config._retry = true;
      await api.post("/api/auth/refresh");  // ì¿ í‚¤ë¡œ ìë™ ì „ì†¡
      return api.request(config);           // ì¬ì‹œë„
    }
    return Promise.reject(error);
  }
);
```

### 2. ì‹ë‹¨ ê³„íš ì•Œê³ ë¦¬ì¦˜

#### TDEE ê³„ì‚° (Total Daily Energy Expenditure)
```
TDEE = BMR Ã— í™œë™ ê³„ìˆ˜

BMR (Basal Metabolic Rate):
- ë‚¨ì„±: 10 Ã— ì²´ì¤‘(kg) + 6.25 Ã— í‚¤(cm) - 5 Ã— ë‚˜ì´ + 5
- ì—¬ì„±: 10 Ã— ì²´ì¤‘(kg) + 6.25 Ã— í‚¤(cm) - 5 Ã— ë‚˜ì´ - 161

í™œë™ ê³„ìˆ˜:
- 1 (ìµœì†Œ): 1.2
- 2 (ê°€ë²¼ì›€): 1.375
- 3 (ë³´í†µ): 1.55
- 4 (ë§ìŒ): 1.725
```

#### ì¼ì¼ ì¹¼ë¡œë¦¬ ì¦ê°ëŸ‰ ê³„ì‚°
```java
// ëª©í‘œ ë‹¬ì„±ì— í•„ìš”í•œ ì¼ì¼ ì¹¼ë¡œë¦¬ ì¦ê°
dailyDelta = (ì‹œì‘ì²´ì¤‘ - ëª©í‘œì²´ì¤‘) Ã— 7700 / (ê¸°ê°„(ì£¼) Ã— 7)
// 7700 kcal = 1kg ì§€ë°©

// ì•ˆì „ ì¥ì¹˜ 1: íƒ€ì…ë³„ í•œë„
if (LEAN && dailyDelta < -TDEEÃ—0.2) dailyDelta = -TDEEÃ—0.2;  // ìµœëŒ€ 20% ê°ëŸ‰
if (HEALTH && dailyDelta > TDEEÃ—0.2) dailyDelta = TDEEÃ—0.2;  // ìµœëŒ€ 20% ì¦ëŸ‰

// ì•ˆì „ ì¥ì¹˜ 2: ìµœì†Œ ì¹¼ë¡œë¦¬
targetDaily = TDEE + dailyDelta;
if (ë‚¨ì„± && targetDaily < 1500) targetDaily = 1500;
if (ì—¬ì„± && targetDaily < 1200) targetDaily = 1200;
```

#### ë§¤í¬ë¡œ ì˜ì–‘ì†Œ ë¹„ìœ¨
```java
// ê°ëŸ‰(LEAN): íƒ„ìˆ˜í™”ë¬¼ 40%, ë‹¨ë°±ì§ˆ 40%, ì§€ë°© 20%
// ì¦ëŸ‰(HEALTH): íƒ„ìˆ˜í™”ë¬¼ 50%, ë‹¨ë°±ì§ˆ 30%, ì§€ë°© 20%

carbGram = targetDaily Ã— carbRatio / 4;      // íƒ„ìˆ˜í™”ë¬¼ 1g = 4kcal
proteinGram = targetDaily Ã— protRatio / 4;   // ë‹¨ë°±ì§ˆ 1g = 4kcal
fatGram = targetDaily Ã— fatRatio / 9;        // ì§€ë°© 1g = 9kcal
```

### 3. ê³µê³µë°ì´í„° API í†µí•©

#### ìˆœì°¨ ê²€ìƒ‰ ì „ëµ
```java
// ìŠ¹ì¸ì‹í’ˆ â†’ ì‹í’ˆ â†’ ê°€ê³µì‹í’ˆ â†’ ì›ì¬ë£Œ ìˆœìœ¼ë¡œ ê²€ìƒ‰
String[][] plan = {
    {"approved", "DESC_KOR"},      // ìŠ¹ì¸ì‹í’ˆ (ê°€ì¥ ì •í™•)
    {"food", "foodNm"},           // ì¼ë°˜ ì‹í’ˆ
    {"processed", "prdlstNm"},    // ê°€ê³µì‹í’ˆ
    {"material", "MATRL_NM"}      // ì›ì¬ë£Œ
};

for (String[] step : plan) {
    JsonNode items = apiClient.getItems(step[0], Map.of(step[1], searchTerm));
    if (items.isArray() && items.size() > 0) {
        return ResponseEntity.ok(items);  // ì²« ê²°ê³¼ ì¦‰ì‹œ ë°˜í™˜
    }
}
```

**ì¥ì **:
- ì •í™•ë„ ë†’ì€ API ìš°ì„  ê²€ìƒ‰
- ë¹ ë¥¸ ì‘ë‹µ (í‰ê·  200-500ms)
- Fallbackìœ¼ë¡œ ëˆ„ë½ ë°©ì§€

### 4. AI ìƒë‹´ ì‹œìŠ¤í…œ

#### ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë‹µë³€
```java
// 1. ëŒ€í™” íˆìŠ¤í† ë¦¬ ë¡œë“œ (ìµœê·¼ 10ê°œ)
List<ChatHistory> history = chatHistoryRepo
    .findByUserIdOrderByCreatedAtDesc(userId, PageRequest.of(0, 10));

// 2. ì‚¬ìš©ì í”„ë¡œí•„ & ëª©í‘œ ì •ë³´ ì¶”ê°€
if (reportContext != null) {
    systemMessage += String.format("""
        ì‚¬ìš©ì ì •ë³´:
        - ë‹‰ë„¤ì„: %s
        - í‚¤/ëª¸ë¬´ê²Œ: %s cm / %s kg
        - ëª©í‘œ: %s
        - ê¸°ê°„: %sì£¼
        """, context.getNickname(), context.getHeight(), 
             context.getWeight(), context.getGoalType(), context.getWeeks());
}

// 3. OpenAI API í˜¸ì¶œ
OpenAiRequest request = new OpenAiRequest(
    "gpt-4o-mini",
    messages,  // ì‹œìŠ¤í…œ ë©”ì‹œì§€ + íˆìŠ¤í† ë¦¬ + í˜„ì¬ ì§ˆë¬¸
    0.7       // temperature
);
```

**íŠ¹ì§•**:
- ìµœê·¼ ëŒ€í™” 10ê°œ ìœ ì§€ (ì»¨í…ìŠ¤íŠ¸)
- í”„ë¡œí•„ & ëª©í‘œ ê¸°ë°˜ ë§ì¶¤ ë‹µë³€
- ë¦¬í¬íŠ¸ ë°ì´í„° ì‹¤ì‹œê°„ ë°˜ì˜

### 5. ê²Œì‹œíŒ ê¸°ëŠ¥

#### Soft Delete + í˜ì´ì§•
```java
@Query("SELECT p FROM Post p WHERE p.deleted = false AND p.visibility = 'PUBLIC'")
Page<Post> findAllPublicPosts(Pageable pageable);

// ì¢‹ì•„ìš” ì¦ê°€ (íŠ¸ëœì­ì…˜)
@Transactional
public void likePost(Long userId, Long postId) {
    Post post = postRepository.findById(postId)
        .orElseThrow(() -> new EntityNotFoundException("Post not found"));
    
    // ì¤‘ë³µ ì¢‹ì•„ìš” ë°©ì§€
    if (postLikeRepository.existsByUserIdAndPostId(userId, postId)) {
        throw new IllegalStateException("Already liked");
    }
    
    PostLike like = PostLike.of(userId, postId);
    postLikeRepository.save(like);
    post.increaseLikes();  // ë¹„ì •ê·œí™” ì¹´ìš´í„°
}
```

**ìµœì í™”**:
- ë¹„ì •ê·œí™” ì¹´ìš´í„° (ì¢‹ì•„ìš”/ì¡°íšŒìˆ˜)
- Soft Delete (ë³µêµ¬ ê°€ëŠ¥)
- ì¸ë±ìŠ¤ í™œìš© (deleted, visibility)

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

### Backend (Spring Boot)
```
backend/
â”œâ”€â”€ src/main/java/com/healthsync/project/
â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â”œâ”€â”€ user/          # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ profile/       # í”„ë¡œí•„ ê´€ë¦¬
â”‚   â”œâ”€â”€ post/              # ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ
â”‚   â”œâ”€â”€ plan/              # ì‹ë‹¨ ê³„íš
â”‚   â”œâ”€â”€ calc/              # BMI ê³„ì‚°
â”‚   â”œâ”€â”€ nutri/             # ì˜ì–‘ì •ë³´ ê²€ìƒ‰
â”‚   â”œâ”€â”€ openai/            # AI ì±—ë´‡
â”‚   â”œâ”€â”€ security/          # ì¸ì¦/ì¸ê°€
â”‚   â”‚   â”œâ”€â”€ jwt/           # JWT ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ oauth/         # OAuth2 í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ config/            # Spring ì„¤ì •
â”‚   â””â”€â”€ global/            # ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ application.yml    # ì„¤ì • íŒŒì¼
â”œâ”€â”€ build.gradle
â””â”€â”€ Dockerfile
```

### Frontend (React + Vite)
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/               # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ axios.js       # Axios ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ plan.js        # ì‹ë‹¨ ê³„íš API
â”‚   â”‚   â”œâ”€â”€ nutri.js       # ì˜ì–‘ì •ë³´ API
â”‚   â”‚   â””â”€â”€ calc.js        # BMI ê³„ì‚° API
â”‚   â”œâ”€â”€ components/        # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Header/        # í—¤ë”
â”‚   â”‚   â”œâ”€â”€ Profile/       # í”„ë¡œí•„ í¸ì§‘
â”‚   â”‚   â””â”€â”€ RequireAuth.jsx # ì¸ì¦ ê°€ë“œ
â”‚   â”œâ”€â”€ pages/             # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ MainPage.jsx   # ë©”ì¸ (ëœë”©)
â”‚   â”‚   â”œâ”€â”€ PlanSetup.jsx  # ëª©í‘œ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ PlanReport/    # ì§„í–‰ë„ ë¦¬í¬íŠ¸
â”‚   â”‚   â””â”€â”€ ProfilePage/   # í”„ë¡œí•„
â”‚   â”œâ”€â”€ features/          # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”‚   â””â”€â”€ posts/         # ê²Œì‹œíŒ
â”‚   â”‚       â”œâ”€â”€ api.js
â”‚   â”‚       â”œâ”€â”€ Routes.jsx
â”‚   â”‚       â””â”€â”€ components/
â”‚   â”œâ”€â”€ openaiapi/         # AI ì±—ë´‡
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”œâ”€â”€ hooks/             # Custom Hooks
â”‚   â”‚   â””â”€â”€ useMe.js       # ì‚¬ìš©ì ì •ë³´
â”‚   â”œâ”€â”€ lib/               # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ App.jsx            # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ main.jsx           # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ nginx.conf             # Nginx ì„¤ì •
â””â”€â”€ Dockerfile
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Java 17+
- Node.js 18+
- MySQL 8.0+
- Docker & Docker Compose
- Redis (ì„ íƒ)

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### Backend (.env)
```env
# Database
DB_URL=jdbc:mysql://localhost:3306/healthsync?useSSL=false
DB_USERNAME=root
DB_PASSWORD=your_password

# JWT
JWT_SECRET=your_base64_encoded_secret

# OAuth2
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
KAKAO_CLIENT_ID=your_kakao_client_id
KAKAO_CLIENT_SECRET=your_kakao_client_secret
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# OpenAI
OPENAI_API_KEY=your_openai_api_key

# ê³µê³µë°ì´í„° í¬í„¸
DATA_GO_KR_KEY=your_data_go_kr_key

# URLs
CLIENT_URL=http://localhost:5173
SERVER_URL=http://localhost:8080
```

#### Frontend (.env)
```env
VITE_API_BASE_URL=http://localhost:8080
```

### 2. ë¡œì»¬ ê°œë°œ ì‹¤í–‰

```bash
# Backend
cd backend
./gradlew bootRun

# Frontend
cd frontend
npm install
npm run dev
```

**ì ‘ì†**: http://localhost:5173

### 3. Docker Compose ë°°í¬

```bash
# ì „ì²´ ë¹Œë“œ & ì‹¤í–‰
docker-compose up -d --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¢…ë£Œ
docker-compose down
```

**ì„œë¹„ìŠ¤ êµ¬ì„±**:
- Frontend: Nginx (Port 80)
- Backend: Spring Boot (Port 8080)
- MySQL: Port 3306

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. CORS ì´ìŠˆ
**ë¬¸ì œ**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ API í˜¸ì¶œ ì‹œ CORS ì—ëŸ¬

**í•´ê²°**:
```java
// SecurityConfig.java
@Bean
CorsConfigurationSource corsConfigurationSource() {
    CorsConfiguration c = new CorsConfiguration();
    c.setAllowedOrigins(List.of("http://localhost:5173", clientUrl));
    c.setAllowedMethods(List.of("GET","POST","PUT","DELETE","PATCH","OPTIONS"));
    c.setAllowedHeaders(List.of("*"));
    c.setAllowCredentials(true);  // â† HttpOnly Cookie ì „ì†¡ í•„ìˆ˜
    // ...
}
```

### 2. API ê²½ë¡œ ë¶ˆì¼ì¹˜
**ë¬¸ì œ**: í”„ë¡œí•„ í¸ì§‘ ì‹œ 405 Not Allowed

**ì›ì¸**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/profile/edit`, NginxëŠ” `/api/` ê²½ë¡œë§Œ í”„ë¡ì‹œ

**í•´ê²°**:
```javascript
// âŒ Before
await axios.put('/profile/edit', data);

// âœ… After
await axios.put('/api/profile/edit', data);
```

### 3. Nginx Trailing Slash ë¬¸ì œ
**ë¬¸ì œ**: `POST /posts` ìš”ì²­ì´ 404 ë°˜í™˜

**ì›ì¸**: `location /posts/` (slash ìˆìŒ) â†’ `/posts` (slash ì—†ìŒ) ìš”ì²­ ë¯¸ë§¤ì¹­

**í•´ê²°**:
```nginx
# âŒ Before
location /posts/ { ... }

# âœ… After
location /posts { ... }  # slash ì œê±°
```

### 4. Docker ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡±
**ë¬¸ì œ**: ë¹Œë“œ ì‹œ "ENOSPC: no space left on device"

**í•´ê²°**:
```bash
# ë¯¸ì‚¬ìš© ì»¨í…Œì´ë„ˆ/ì´ë¯¸ì§€/ë³¼ë¥¨ ì •ë¦¬
docker system prune -a --volumes

# ì €ë„ ë¡œê·¸ ì •ë¦¬
sudo journalctl --vacuum-time=3d

# apt ìºì‹œ ì •ë¦¬
sudo apt clean && sudo apt autoclean
```

### 5. ë¸Œë¼ìš°ì € ìºì‹œ ë¬¸ì œ
**ë¬¸ì œ**: ì½”ë“œ ë³€ê²½ í›„ì—ë„ ì´ì „ íŒŒì¼ ë¡œë“œ

**í•´ê²°**:
- Vite ë¹Œë“œ ì‹œ ìë™ìœ¼ë¡œ í•´ì‹œ ê¸°ë°˜ íŒŒì¼ëª… ìƒì„± (`index-CSfgygh1.js`)
- í…ŒìŠ¤íŠ¸ ì‹œ ì‹œí¬ë¦¿ ëª¨ë“œ ì‚¬ìš©
- ì„œë²„ ë°°í¬ ì‹œ ë°˜ë“œì‹œ `docker-compose down` í›„ ì¬ë¹Œë“œ

---

## ğŸ“ ë°°ìš´ ì  & ì„±ì¥

### ê¸°ìˆ ì  ì„±ì¥
1. **Spring Security + OAuth2 + JWT í†µí•©**
   - í† í° ê¸°ë°˜ ì¸ì¦ í”Œë¡œìš° ì™„ì „ ì´í•´
   - HttpOnly Cookieì˜ ë³´ì•ˆì  ì¤‘ìš”ì„±
   - Refresh Token ìë™ ê°±ì‹  êµ¬í˜„

2. **Docker ê¸°ë°˜ ë°°í¬ ìë™í™”**
   - Multi-stage ë¹Œë“œë¡œ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ìµœì í™”
   - Docker Composeë¡œ ë©€í‹° ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
   - Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •

3. **RESTful API ì„¤ê³„**
   - ì¼ê´€ëœ URI íŒ¨í„´ (/api/resource)
   - HTTP ë©”ì„œë“œ ì˜ë¯¸ì  ì‚¬ìš© (GET/POST/PUT/DELETE)
   - ì ì ˆí•œ ìƒíƒœ ì½”ë“œ ë°˜í™˜

4. **í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬**
   - Custom Hook (useMe)ìœ¼ë¡œ ì „ì—­ ìƒíƒœ ê´€ë¦¬
   - Axios Interceptorë¡œ í† í° ê°±ì‹  ìë™í™”
   - React Router ê¸°ë°˜ SPA ë¼ìš°íŒ…

5. **ì™¸ë¶€ API í†µí•©**
   - ê³µê³µë°ì´í„° í¬í„¸ 4ì¢… API ìˆœì°¨ ê²€ìƒ‰ ì „ëµ
   - OpenAI API ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì²˜ë¦¬
   - ì—ëŸ¬ í•¸ë“¤ë§ ë° Fallback

### ë¬¸ì œ í•´ê²° ëŠ¥ë ¥
- CORS, ê²½ë¡œ ë¶ˆì¼ì¹˜, Docker ì´ìŠˆ ë“± ì‹¤ì „ ë¬¸ì œ í•´ê²°
- ë¡œê·¸ ë¶„ì„ì„ í†µí•œ ë””ë²„ê¹… ìˆ™ë ¨ë„ í–¥ìƒ
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë¬¸ì„œí™”ë¡œ ì¬ë°œ ë°©ì§€

---

## ğŸš€ í–¥í›„ ê³„íš

### ë‹¨ê¸° (1-2ê°œì›”)
- [ ] ì‹ë‹¨ ê¸°ë¡ ìº˜ë¦°ë” ë·°
- [ ] ì¹œêµ¬ ì´ˆëŒ€ & í•¨ê»˜ ëª©í‘œ ë‹¬ì„±
- [ ] í‘¸ì‹œ ì•Œë¦¼ (ëª©í‘œ ë‹¬ì„±ë¥  ì•Œë¦¼)
- [ ] PWA ì „í™˜ (ëª¨ë°”ì¼ ì•±í™”)

### ì¤‘ê¸° (3-6ê°œì›”)
- [ ] ìš´ë™ ë£¨í‹´ ê´€ë¦¬ ê¸°ëŠ¥
- [ ] ì˜ì–‘ì‚¬/íŠ¸ë ˆì´ë„ˆ ë§¤ì¹­ ì„œë¹„ìŠ¤
- [ ] í”„ë¦¬ë¯¸ì—„ êµ¬ë… ëª¨ë¸ (AI ë¬´ì œí•œ ì‚¬ìš©)
- [ ] ê±´ê°•ê²€ì§„ ë°ì´í„° ì—°ë™

### ì¥ê¸° (6ê°œì›”+)
- [ ] AI ê¸°ë°˜ ìë™ ì‹ë‹¨ ì¶”ì²œ (GPT-4o)
- [ ] ì›¨ì–´ëŸ¬ë¸” ê¸°ê¸° ì—°ë™ (Fitbit, Apple Watch)
- [ ] ì˜ì–‘ ì„±ë¶„ ì´ë¯¸ì§€ ì¸ì‹ (Vision API)
- [ ] ë‹¤êµ­ì–´ ì§€ì› (i18n)

---

## ğŸ“ ì—°ë½ì²˜

- **GitHub**: [jinmo-kim-korean](https://github.com/jinmo-kim-korean)
- **Email**: jinmo.kim.korean@gmail.com
- **ë°°í¬ ì‚¬ì´íŠ¸**: https://healthsync-dev.duckdns.org

---

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ ìš©ë„ë¡œ ì œì‘ë˜ì—ˆìœ¼ë©°, ìƒì—…ì  ì‚¬ìš©ì„ ê¸ˆì§€í•©ë‹ˆë‹¤.

---

## ğŸ™ ê°ì‚¬ì˜ ë§

- **ê³µê³µë°ì´í„° í¬í„¸**: ì‹í’ˆì˜ì–‘ì •ë³´ API ì œê³µ
- **OpenAI**: GPT-4o-mini API ì§€ì›
- **OAuth2 Providers**: Google, Kakao, Naver ì†Œì…œ ë¡œê·¸ì¸
- **ì˜¤í”ˆì†ŒìŠ¤ ì»¤ë®¤ë‹ˆí‹°**: Spring Boot, React ë° ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

<div align="center">

**â­ ì´ í”„ë¡œì íŠ¸ê°€ ë„ì›€ì´ ë˜ì—ˆë‹¤ë©´ Starë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”! â­**

</div>
